<%= render layout: 'shared/map_filters/map_filter', locals: { label: label, filter_key: filter_key }  do %>
  <div data-controller="filterableList">
    <div class="relative">
      <input class="w-full border-b border-gray-400 py-1 pl-1" data-filterableList-target="search" data-action="input->filterableList#search" type="text"></input>
      <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
          <path fillRule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" clipRule="evenodd" />
        </svg>
      </div>
    </div>
    <div class="overflow-y-scroll h-48 mt-1 px-1">
      <% items.each do |item| %>
        <div data-filterableList-target="item" data-item-value="<%= item[:label] %>" class="hover:text-gray-600 flex items-center">
          <input data-filterableList-target="checkbox" id="<%= item[:value] %>" type="checkbox" value="<%= item[:value] %>"></input>
          <label for="<%= item[:value] %>" class="w-full ml-1 cursor-pointer"><%= item[:label] %></label>
        </div>
      <% end %>
    </div>
    <div class="mt-2 flex justify-between">
        <button class="hover:underline" data-action="click->filterableList#clearAll">Clear</button>
      <div>
        <button class="ml-2 hover:underline font-medium" data-action="click->filterableList#emitFilterChange">Apply</button>
      </div>
    </div>
  </div>
<% end %>